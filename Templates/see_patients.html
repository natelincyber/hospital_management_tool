{% extends 'base.html' %}

{% block head %}
<style>
</style>

{% endblock %}

{% block title %}See Patients{% endblock %}


{% block body %}
    {% if see_patients|length == 0 %}
        <p style="white-space:pre-wrap">You have no patients. Go to the add patient menu to add a new patient!</p>
    {% else %}
        <br>    
        <div>
            <h1 style="display:inline">All Patients</h1>
        </div>
        <hr>
        <table class="table table-striped" style="text-align: center;">
            <thead class="thead-dark">
            <tr>
                <th scope="col">Medical Identification</th>
                <th scope="col">Patient</th>
                <th scope="col">Gender</th>
                <th scope="col">Illness</th>
                <th scope="col">Age</th>
                <th scope="col">Date Admitted</th>
                <th scope="col">Predicted Days Until Recovery</th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
                {% for patient in see_patients %}

                    <tr>
                        <th scope="row" class="align-middle">
                            {% if patient.medID %}
                                {{ patient.medID }}
                            {% else %}
                                -
                            {% endif %}
                        </th>

                        {% if patient.firstName and patient.lastName and patient.medID %}
                            <td class="align-middle">{{ patient.firstName }} {{ patient.lastName }}</td>
                        {% else %}
                            <td class="align-middle">-</td>
                        {% endif %}

                        {% if patient.gender %}
                            <td class="align-middle">{{ patient.gender }}</td>
                        {% else %}
                            <td class="align-middle">-</td>
                        {% endif %}

                        {% if patient.state %}
                            <td class="align-middle">{{ patient.state }}</td>
                        {% else %}
                            <td class="align-middle">-</td>
                        {% endif %}

                        {% if patient.age %}
                            <td class="align-middle">{{ patient.age }}</td>
                        {% else %}
                            <td class="align-middle">-</td>
                        {% endif %}

                        {% if patient.cureTime %}
                            <td class="align-middle">{{ patient.cureTime }}</td>
                        {% else %}
                            <td class="align-middle">-</td>
                        {% endif %}
                        
                        <td class="align-middle">{{ patient.date_admitted.strftime('%m/%d/%Y') }}</td>

                        {% set date = patient.date_admitted.strftime('%m/%d/%Y') %}

                        {% set dischargeDate = date[3:5] %}




                        <td class="align-middle"> THIS: {{ dischargeDate }}</td>

                        <td class="align-middle"><a class='btn btn-primary btn-sm' href='/see_patients/edit/{{ patient.id }}'><img src="/static/edit.png"></a><a class='btn btn-danger btn-sm' href='/see_patients/delete/{{ patient.id }}'><img src="/static/trash.png"></a></td>
                        
                    </tr>

                {% endfor %}
            </tbody>
        </table>
    {% endif %}  


{% endblock %}